<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        body {background:linear-gradient(120deg, #b5d8ff 0%, #f8fcff 100%); font-family:'Segoe UI', Arial,sans-serif; margin:0;}
        .wrapper {max-width:430px; margin:42px auto; background:rgba(255,255,255,0.97); border-radius:22px; box-shadow:0 6px 32px rgba(40,80,120,0.11); padding:42px 28px 34px 28px; text-align:center; position:relative;}
        .game-icon { font-size:2.7rem; color:#309be6; margin-bottom:10px;}
        h1 {font-size:2.2rem; color:#2567b3; margin-bottom:10px;}
        .uitleg {color:#467; font-size:1.13rem; margin-bottom:22px;}
        .memory-board {display:grid; grid-template-columns:repeat(3,70px); grid-gap:16px; justify-content:center; margin:24px 0 18px 0;}
        .card {width:70px; height:70px; background:#e3effc; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:2rem; cursor:pointer; box-shadow:0 2px 6px rgba(70,120,160,0.06); user-select:none; transition:background 0.15s;}
        .card.flipped,.card.matched {background:#309be6; color:#fff;}
        .card.matched {opacity:.62; cursor:default;}
        #bericht {min-height:22px; margin-bottom:8px; color:#309be6; font-weight:bold;}
        #highscore { font-size: 1.13rem; color: #319be6; margin-bottom: 8px; }
        #highscore.new { color: #18b635; animation: pop 1s;}
        @keyframes pop {0%{transform:scale(1.2);} 70%{transform:scale(1.12);} 100%{transform:scale(1);}}
        .terug {display:block; margin:38px auto 0 auto; text-decoration:none; color:#247; font-size:1.09rem;}
        .terug:hover {color:#309be6;}
        .sticky {position:fixed; left:15px; bottom:15px; z-index:99; background:#fff; box-shadow:0 2px 10px #bbb2;}
        @media (max-width:480px){.wrapper{padding:16px 2vw;}}
    </style>
</head>
<body>
<div class="wrapper">
    <div class="game-icon"><i class="fas fa-brain"></i></div>
    <h1>Memory</h1>
    <div class="uitleg">Draai steeds twee kaarten om. Vind jij alle paren?<br><span style="color:#299be6;">Druk op <b>spatie</b> om opnieuw te starten!</span></div>
    <div class="memory-board" id="memoryBoard"></div>
    <div id="highscore">Highscore (minste zetten): <span id="hs">--</span></div>
    <div id="bericht"></div>
    <button onclick="resetGame()" id="opnieuwBtn" style="display:none;">Opnieuw spelen</button>
    <a href="index.html" class="terug sticky"><i class="fas fa-home"></i> Menu</a>
</div>
<script>
    const icons = ['fa-heart', 'fa-star', 'fa-moon'];
    let board = [], flippedCards = [], lockBoard = false, pairs = 0, zetten = 0;
    function getHighScore() { return Number(localStorage.getItem('memoryHS')||0); }
    function setHighScore(s) { localStorage.setItem('memoryHS',s); }
    function showHighScore(newHS=false) {
        const hs = getHighScore();
        document.getElementById('hs').textContent = hs ? hs : '--';
        document.getElementById('highscore').classList.toggle('new',newHS);
    }
    function setupBoard() {
        let items = [...icons, ...icons];
        items = items.sort(() => Math.random() - 0.5);
        board = items;
        pairs = 0; lockBoard = false; flippedCards = []; zetten = 0;
        document.getElementById('bericht').textContent = '';
        document.getElementById('opnieuwBtn').style.display = 'none';
        const memoryBoard = document.getElementById('memoryBoard');
        memoryBoard.innerHTML = '';
        for (let i = 0; i < 6; i++) {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.icon = items[i];
            card.onclick = () => flipCard(card, i);
            memoryBoard.appendChild(card);
        }
        showHighScore();
    }
    function flipCard(card, idx) {
        if (lockBoard || card.classList.contains('flipped') || card.classList.contains('matched')) return;
        card.classList.add('flipped');
        card.innerHTML = `<i class="fas ${board[idx]}"></i>`;
        flippedCards.push({card, idx});
        if (flippedCards.length === 2) {
            lockBoard = true;
            zetten++;
            setTimeout(checkPair, 700);
        }
    }
    function checkPair() {
        const [a, b] = flippedCards;
        if (board[a.idx] === board[b.idx]) {
            a.card.classList.add('matched');
            b.card.classList.add('matched');
            pairs++;
            if (pairs === 3) {
                document.getElementById('bericht').textContent = `Gefeliciteerd! Je hebt alle paren gevonden in ${zetten} zetten!`;
                let hs = getHighScore();
                let newHS = (!hs || zetten < hs);
                if (newHS) setHighScore(zetten);
                showHighScore(newHS);
                document.getElementById('opnieuwBtn').style.display = '';
            }
        } else {
            a.card.classList.remove('flipped');
            b.card.classList.remove('flipped');
            a.card.innerHTML = '';
            b.card.innerHTML = '';
        }
        flippedCards = [];
        lockBoard = false;
    }
    function resetGame() { setupBoard(); }
    setupBoard();
    // Spatiebalk restart, 'm' menu
    window.addEventListener('keydown', e=>{
        if(e.key===" " && document.getElementById('opnieuwBtn').style.display!=="none"){e.preventDefault(); resetGame();}
        if(e.key.toLowerCase()==='m') window.location='index.html';
    });
</script>
</body>
</html>
